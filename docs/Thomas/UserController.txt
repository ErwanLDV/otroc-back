<?php

namespace App\Controller\Api;

use App\Entity\User;
use App\Repository\OfferRepository;
use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Response as HttpFoundationResponse;
use Symfony\Component\Routing\Annotation\Route;


class UserController extends AbstractController
{
  /**
   * @Route("/api/users/{id<\d+>/offers}", name="app_api_users_offers_browse")
   */
  public function read(User $user): JsonResponse
  {
    return $this->json(
      $user,
      HttpFoundationResponse::HTTP_OK,
      [],
      [
        "groups" =>
        [
          "app_api_users_offers_browse"
        ]
      ]
    );
  }


  /**
   * @Route("/api/users/{id<\d+>}/offers", name="app_api_users_offers_browse")
   */
  public function pasbrowse(User $user, OfferRepository $offerRepository): JsonResponse
  {
    return $this->json(
      $offerRepository->findAll(),
      HttpFoundationResponse::HTTP_OK,
      [],
      [
        "groups" =>
        [
          "browse_user"
        ]
      ]
    );
  }
}
